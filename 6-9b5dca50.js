(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{52:function(t,o,e){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var o,e=1,s=arguments.length;e<s;e++)for(var i in o=arguments[e])Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i]);return t}).apply(this,arguments)},i=this&&this.__values||function(t){var o="function"==typeof Symbol&&t[Symbol.iterator],e=0;return o?o.call(t):{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}};Object.defineProperty(o,"__esModule",{value:!0});var n=e(53),c=e(54),a={offsetAttachTop:0,offsetAttachBottom:0,onScroll:function(){},onAttach:function(){},onDetach:function(){}},r=function(){function t(t,o){this.scrollingAnchorMain=null,this.option=null,this.selector="",this.state=null,this.scrollingAnchorMain=new n.ScrollingAnchorMain,this.selector=t||".scrolling-anchor",this.option=s({},a,o),this.receiveClientBroadcast=this.receiveClientBroadcast.bind(this),this.onScroll=this.onScroll.bind(this),this.onResize=this.onResize.bind(this),this.calculateOffsetTop=this.calculateOffsetTop.bind(this),this.calculateOffsetBottom=this.calculateOffsetBottom.bind(this),this.setPosition=this.setPosition.bind(this),this.destroy=this.destroy.bind(this),this.initialize()}return t.prototype.initialize=function(){var t,o,e=this;this.state={objects:document.querySelectorAll(this.selector),documentBody:document.documentElement||document.body,scrollOffsetY:0,scrollHeight:0,defaultOffsetAttachTop:0,defaultOffsetAttachBottom:0,offsetAttachTop:[0],offsetAttachBottom:[0],attachedIndexTop:-1,attachedIndexBottom:-1};var s=[],n=[];try{for(var a=i(this.state.objects),r=a.next();!r.done;r=a.next()){var h=r.value;"top"===(h.getAttribute("data-direction")||"top")?s.push(h):n.unshift(h)}}catch(o){t={error:o}}finally{try{r&&!r.done&&(o=a.return)&&o.call(a)}finally{if(t)throw t.error}}this.option?(this.calculateOffsetTop(this.option.offsetAttachTop||0),this.calculateOffsetBottom(this.option.offsetAttachBottom||0),this.option.onAttach=this.option.onAttach||function(){},this.option.onDetach=this.option.onDetach||function(){}):(this.calculateOffsetTop(0),this.calculateOffsetBottom(0),this.option.onAttach=function(){},this.option.onDetach=function(){}),s.forEach((function(t,o){e.scrollingAnchorMain.addObserver(new c.ScrollingAnchorClient({el:t,index:o,direction:"top",documentBody:e.state.documentBody,scrollOffsetY:e.state.scrollOffsetY,scrollHeight:e.state.scrollHeight,defaultOffsetAttachTop:e.state.defaultOffsetAttachTop,defaultOffsetAttachBottom:e.state.defaultOffsetAttachBottom,offsetAttachTop:0,offsetAttachBottom:0,broadcast:e.receiveClientBroadcast}))})),n.forEach((function(t,o){e.scrollingAnchorMain.addObserver(new c.ScrollingAnchorClient({el:t,index:o,direction:"bottom",documentBody:e.state.documentBody,scrollOffsetY:e.state.scrollOffsetY,scrollHeight:e.state.scrollHeight,defaultOffsetAttachTop:e.state.defaultOffsetAttachTop,defaultOffsetAttachBottom:e.state.defaultOffsetAttachBottom,offsetAttachTop:0,offsetAttachBottom:0,broadcast:e.receiveClientBroadcast}))})),window.addEventListener("scroll",this.onScroll,!1),window.addEventListener("resize",this.onResize,!1),this.onScroll()},t.getScrollOffsetY=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop},Object.defineProperty(t.prototype,"scrollOffsetY",{get:function(){return this.state.scrollOffsetY},set:function(t){var o=this;if(t!==this.state.scrollOffsetY){var e=this.state.scrollOffsetY;this.scrollingAnchorMain.notifyAll("SCROLL_OFFSET_Y",t),this.state.scrollOffsetY=t,setTimeout((function(){return o.option.onScroll(t,e,o.scrollHeight-o.state.documentBody.offsetHeight)}),0)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollHeight",{get:function(){return this.state.scrollHeight},set:function(t){t>0&&t!==this.state.scrollHeight&&(this.scrollingAnchorMain.notifyAll("SCROLL_HEIGHT",t),this.state.scrollHeight=t)},enumerable:!0,configurable:!0}),t.prototype.receiveClientBroadcast=function(t,o){var e=this;switch(t){case"ATTACHED_TOP":this.state.offsetAttachTop.push(o),this.state.attachedIndexTop++,this.scrollingAnchorMain.notifyAll("OFFSET_ATTACH_TOP",this.state.offsetAttachTop),this.scrollingAnchorMain.notifyAll("INDEX_ATTACH_TOP",this.state.attachedIndexTop),setTimeout((function(){return e.option.onAttach("top",e.state.attachedIndexTop)}),0);break;case"ATTACHED_BOTTOM":this.state.offsetAttachBottom.push(o),this.state.attachedIndexBottom++,this.scrollingAnchorMain.notifyAll("OFFSET_ATTACH_BOTTOM",this.state.offsetAttachBottom),this.scrollingAnchorMain.notifyAll("INDEX_ATTACH_BOTTOM",this.state.attachedIndexBottom),setTimeout((function(){return e.option.onAttach("bottom",e.state.attachedIndexBottom)}),0);break;case"DETACHED_TOP":this.state.offsetAttachTop.pop(),this.state.attachedIndexTop--,this.scrollingAnchorMain.notifyAll("OFFSET_DETACH_TOP",this.state.offsetAttachTop),this.scrollingAnchorMain.notifyAll("INDEX_ATTACH_TOP",this.state.attachedIndexTop),setTimeout((function(){return e.option.onDetach("top",e.state.attachedIndexTop)}),0);break;case"DETACHED_BOTTOM":this.state.offsetAttachBottom.pop(),this.state.attachedIndexBottom--,this.scrollingAnchorMain.notifyAll("OFFSET_DETACH_BOTTOM",this.state.offsetAttachBottom),this.scrollingAnchorMain.notifyAll("INDEX_ATTACH_BOTTOM",this.state.attachedIndexBottom),setTimeout((function(){return e.option.onDetach("bottom",e.state.attachedIndexBottom)}),0)}},t.prototype.onScroll=function(){this.scrollOffsetY=t.getScrollOffsetY(),this.scrollHeight=this.state.documentBody.scrollHeight},t.prototype.onResize=function(){var t=this;this.resizeTID&&clearTimeout(this.resizeTID),this.resizeTID=setTimeout((function(){t.onScroll()}),500)},t.prototype.calculateOffsetTop=function(t){this.state.defaultOffsetAttachTop=t},t.prototype.calculateOffsetBottom=function(t){this.state.defaultOffsetAttachBottom=t},t.prototype.setPosition=function(t){void 0!==t.offsetAttachTop&&(this.calculateOffsetTop(t.offsetAttachTop),this.scrollingAnchorMain.notifyAll("DEFAULT_OFFSET_ATTACH_TOP",this.state.defaultOffsetAttachTop)),void 0!==t.offsetAttachBottom&&(this.calculateOffsetBottom(t.offsetAttachBottom),this.scrollingAnchorMain.notifyAll("DEFAULT_OFFSET_ATTACH_BOTTOM",this.state.defaultOffsetAttachBottom))},t.prototype.destroy=function(){this.scrollingAnchorMain.clearObservers(),window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResize)},t}();o.ScrollingAnchor=r},53:function(t,o,e){"use strict";var s=this&&this.__values||function(t){var o="function"==typeof Symbol&&t[Symbol.iterator],e=0;return o?o.call(t):{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}};Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function t(){this.observers=[]}return t.prototype.addObserver=function(t){return this.observers.push(t),this.observers.length},t.prototype.notifyAll=function(t,o){var e,i;try{for(var n=s(this.observers),c=n.next();!c.done;c=n.next())c.value.updateStatus(t,o)}catch(t){e={error:t}}finally{try{c&&!c.done&&(i=n.return)&&i.call(n)}finally{if(e)throw e.error}}},t.prototype.clearObservers=function(){var t,o;try{for(var e=s(this.observers),i=e.next();!i.done;i=e.next())i.value.destroy()}catch(o){t={error:o}}finally{try{i&&!i.done&&(o=e.return)&&o.call(e)}finally{if(t)throw t.error}}this.observers=[]},t}();o.ScrollingAnchorMain=i},54:function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var s=function(){function t(t){this.option=null,this.wrapper=null,this.content=null,this.proxied={isActived:!1,offsetHeight:0},this.props={documentBody:null,scrollOffsetY:0,scrollHeight:0,defaultOffsetAttachTop:0,defaultOffsetAttachBottom:0,offsetAttachTop:0,offsetAttachBottom:0},this.virtualOffsetTop=0,this.option=t,this.wrapper=t.el,this.content=this.wrapper.children[0],this.virtualOffsetTop=this.wrapper.offsetTop,this.offsetHeight=this.wrapper.offsetHeight,this.props={documentBody:t.documentBody,scrollOffsetY:t.scrollOffsetY,scrollHeight:t.scrollHeight,defaultOffsetAttachTop:t.defaultOffsetAttachTop,defaultOffsetAttachBottom:t.defaultOffsetAttachBottom,offsetAttachTop:t.offsetAttachTop,offsetAttachBottom:t.offsetAttachBottom},this.addClass(["sa-"+t.direction])}return Object.defineProperty(t.prototype,"isActived",{get:function(){return!!this.proxied.isActived},set:function(t){t!==this.proxied.isActived&&(t?(this.addClass(["sa-attached"]),"top"===this.option.direction?(this.content.style.top=this.props.defaultOffsetAttachTop+this.props.offsetAttachTop+"px",this.option.broadcast("ATTACHED_TOP",this.offsetHeight)):(this.props.defaultOffsetAttachBottom>0?(this.content.style.bottom=this.props.offsetAttachBottom+"px",this.content.style.transform="translateY(-"+this.props.defaultOffsetAttachBottom+"px)"):(this.content.style.bottom=this.props.defaultOffsetAttachBottom+this.props.offsetAttachBottom+"px",this.content.style.transform=""),this.option.broadcast("ATTACHED_BOTTOM",this.offsetHeight))):(this.removeClass(["sa-attached"]),"top"===this.option.direction?(this.content.style.top="",this.option.broadcast("DETACHED_TOP",this.offsetHeight)):(this.content.style.bottom="",this.content.style.transform="",this.option.broadcast("DETACHED_BOTTOM",this.offsetHeight))),this.proxied.isActived=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offsetHeight",{get:function(){return this.proxied.offsetHeight||0},set:function(t){this.proxied.offsetHeight!==t&&(this.proxied.offsetHeight=t,this.wrapper.setAttribute("style","height:"+t+"px"))},enumerable:!0,configurable:!0}),t.prototype.updateStatus=function(t,o){var e;switch(t){case"SCROLL_OFFSET_Y":this.props.scrollOffsetY=o,this.checkWaypointActived();break;case"SCROLL_HEIGHT":this.virtualOffsetTop=this.wrapper.offsetTop,this.offsetHeight=this.wrapper.offsetHeight,this.props.scrollHeight=o,this.checkWaypointActived();break;case"DEFAULT_OFFSET_ATTACH_TOP":this.props.defaultOffsetAttachTop=o,this.isActived=!1,this.checkWaypointActived();break;case"DEFAULT_OFFSET_ATTACH_BOTTOM":this.props.defaultOffsetAttachBottom=o,this.isActived=!1,this.checkWaypointActived();break;case"OFFSET_ATTACH_TOP":case"OFFSET_DETACH_TOP":e=0===this.option.index?o[0]:o.slice(0,this.option.index+1).reduce((function(t,o){return t+o}),0),this.props.offsetAttachTop!==e&&(this.props.offsetAttachTop=e);break;case"OFFSET_ATTACH_BOTTOM":case"OFFSET_DETACH_BOTTOM":e=0===this.option.index?o[0]:o.slice(0,this.option.index+1).reduce((function(t,o){return t+o}),0),this.props.offsetAttachBottom!==e&&(this.props.offsetAttachBottom=e);break;case"INDEX_ATTACH_TOP":"top"===this.option.direction&&(this.option.index===o?this.addClass(["sa-last"]):this.removeClass(["sa-last"]));break;case"INDEX_ATTACH_BOTTOM":"bottom"===this.option.direction&&(this.option.index===o?this.addClass(["sa-last"]):this.removeClass(["sa-last"]))}},t.prototype.destroy=function(){this.removeClass(["sa-attached","sa-last"]),this.content.style.top="",this.content.style.bottom=""},t.prototype.checkWaypointActived=function(){if("top"===this.option.direction){var t=this.props.scrollOffsetY+this.props.offsetAttachTop;this.isActived=this.virtualOffsetTop<t}else t=this.props.scrollOffsetY+this.props.documentBody.offsetHeight-this.offsetHeight-this.props.defaultOffsetAttachTop-this.props.defaultOffsetAttachBottom-this.props.offsetAttachBottom,this.isActived=this.virtualOffsetTop>t},t.prototype.addClass=function(t){var o=this;t.forEach((function(t){return o.content.classList.add(t)}))},t.prototype.removeClass=function(t){var o=this;t.forEach((function(t){return o.content.classList.remove(t)}))},t}();o.ScrollingAnchorClient=s},56:function(t,o,e){}}]);
//# sourceMappingURL=6-9b5dca50.js.map